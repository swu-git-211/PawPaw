{"ast":null,"code":"var _jsxFileName = \"D:\\\\de351\\\\pawpaw\\\\frontend\\\\src\\\\components\\\\EditProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Box, TextField, Button, Select, MenuItem, FormControlLabel, Checkbox } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditProfile = ({\n  user,\n  onSave\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    phone: '',\n    birthday: '',\n    bio: '',\n    petTypes: [],\n    showEmail: false\n  });\n  const [profileImage, setProfileImage] = useState(null);\n  useEffect(() => {\n    if (user) {\n      setFormData({\n        phone: user.phone || '',\n        birthday: user.birthday || '',\n        bio: user.bio || '',\n        petTypes: user.petTypes || [],\n        showEmail: user.showEmail || false\n      });\n      setProfileImage(user.profileImage || null); // ตรวจสอบภาพโปรไฟล์ที่มีอยู่\n    }\n  }, [user]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const handleSave = async e => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('Please log in first');\n        return;\n      }\n      const data = new FormData();\n      data.append('phone', formData.phone);\n      data.append('bio', formData.bio);\n      data.append('petTypes', formData.petTypes);\n      data.append('birthday', formData.birthday);\n      data.append('showEmail', formData.showEmail);\n      if (profileImage) {\n        data.append('profileImage', profileImage); // ส่งไฟล์ภาพ\n      }\n      const response = await axios.post('http://10.20.44.221:5000/pawpaw/profile/user/profile', data, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Profile updated successfully');\n      window.location.reload(); // รีเฟรชหน้า\n\n      // ส่งข้อมูลที่อัปเดตไปยัง parent component\n      if (onSave) {\n        onSave(response.data.data); // ตรวจสอบให้ดีว่า response เป็นแบบไหน\n      }\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      alert('Failed to update profile');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [profileImage && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `http://10.20.44.221:5000${profileImage}`,\n        alt: \"Profile\",\n        style: {\n          width: '100px',\n          height: '100px',\n          objectFit: 'cover'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Phone\",\n        name: \"phone\",\n        value: formData.phone,\n        onChange: handleChange,\n        fullWidth: true,\n        margin: \"dense\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Birthday\",\n        name: \"birthday\",\n        type: \"date\",\n        value: formData.birthday,\n        onChange: handleChange,\n        fullWidth: true,\n        margin: \"dense\",\n        InputLabelProps: {\n          shrink: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Bio\",\n        name: \"bio\",\n        value: formData.bio,\n        onChange: handleChange,\n        fullWidth: true,\n        margin: \"dense\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        multiple: true,\n        value: formData.petTypes,\n        onChange: e => setFormData({\n          ...formData,\n          petTypes: e.target.value\n        }),\n        fullWidth: true,\n        margin: \"dense\",\n        children: ['Cat', 'Dog', 'Bird', 'Fish', 'Rabbit', 'Turtle', 'Other'].map(type => /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: type,\n          children: type\n        }, type, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n        control: /*#__PURE__*/_jsxDEV(Checkbox, {\n          checked: formData.showEmail,\n          onChange: e => setFormData({\n            ...formData,\n            showEmail: e.target.checked\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this),\n        label: \"Show Email on Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => setProfileImage(e.target.files[0]),\n        accept: \"image/*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleSave,\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(EditProfile, \"5RiY1mWRPp+L6FYrPUsU079Yz80=\");\n_c = EditProfile;\nexport default EditProfile;\nvar _c;\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"names":["React","useState","useEffect","axios","Box","TextField","Button","Select","MenuItem","FormControlLabel","Checkbox","jsxDEV","_jsxDEV","EditProfile","user","onSave","_s","formData","setFormData","phone","birthday","bio","petTypes","showEmail","profileImage","setProfileImage","handleChange","e","name","value","target","handleSave","preventDefault","token","localStorage","getItem","alert","data","FormData","append","response","post","headers","Authorization","window","location","reload","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","style","width","height","objectFit","label","onChange","fullWidth","margin","type","InputLabelProps","shrink","multiple","map","control","checked","files","accept","variant","color","onClick","_c","$RefreshReg$"],"sources":["D:/de351/pawpaw/frontend/src/components/EditProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Box, TextField, Button, Select, MenuItem, FormControlLabel, Checkbox } from '@mui/material';\r\n\r\nconst EditProfile = ({ user, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    phone: '',\r\n    birthday: '',\r\n    bio: '',\r\n    petTypes: [],\r\n    showEmail: false,\r\n  });\r\n  const [profileImage, setProfileImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFormData({\r\n        phone: user.phone || '',\r\n        birthday: user.birthday || '',\r\n        bio: user.bio || '',\r\n        petTypes: user.petTypes || [],\r\n        showEmail: user.showEmail || false,\r\n      });\r\n      setProfileImage(user.profileImage || null);  // ตรวจสอบภาพโปรไฟล์ที่มีอยู่\r\n    }\r\n  }, [user]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleSave = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        alert('Please log in first');\r\n        return;\r\n      }\r\n\r\n      const data = new FormData();\r\n      data.append('phone', formData.phone);\r\n      data.append('bio', formData.bio);\r\n      data.append('petTypes', formData.petTypes);\r\n      data.append('birthday', formData.birthday);\r\n      data.append('showEmail', formData.showEmail);\r\n\r\n      if (profileImage) {\r\n        data.append('profileImage', profileImage); // ส่งไฟล์ภาพ\r\n      }\r\n\r\n      const response = await axios.post('http://10.20.44.221:5000/pawpaw/profile/user/profile', data, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      alert('Profile updated successfully');\r\n      window.location.reload();  // รีเฟรชหน้า\r\n\r\n      // ส่งข้อมูลที่อัปเดตไปยัง parent component\r\n      if (onSave) {\r\n        onSave(response.data.data);  // ตรวจสอบให้ดีว่า response เป็นแบบไหน\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      alert('Failed to update profile');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <h2>Edit Profile</h2>\r\n      <form>\r\n        {profileImage && (\r\n          <img src={`http://10.20.44.221:5000${profileImage}`} alt=\"Profile\" style={{ width: '100px', height: '100px', objectFit: 'cover' }} />\r\n        )}\r\n        <TextField\r\n          label=\"Phone\"\r\n          name=\"phone\"\r\n          value={formData.phone}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          margin=\"dense\"\r\n        />\r\n        <TextField\r\n          label=\"Birthday\"\r\n          name=\"birthday\"\r\n          type=\"date\"\r\n          value={formData.birthday}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          margin=\"dense\"\r\n          InputLabelProps={{ shrink: true }}\r\n        />\r\n        <TextField\r\n          label=\"Bio\"\r\n          name=\"bio\"\r\n          value={formData.bio}\r\n          onChange={handleChange}\r\n          fullWidth\r\n          margin=\"dense\"\r\n        />\r\n        <Select\r\n          multiple\r\n          value={formData.petTypes}\r\n          onChange={(e) => setFormData({ ...formData, petTypes: e.target.value })}\r\n          fullWidth\r\n          margin=\"dense\"\r\n        >\r\n          {['Cat', 'Dog', 'Bird', 'Fish', 'Rabbit', 'Turtle', 'Other'].map((type) => (\r\n            <MenuItem key={type} value={type}>\r\n              {type}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={formData.showEmail}\r\n              onChange={(e) => setFormData({ ...formData, showEmail: e.target.checked })}\r\n            />\r\n          }\r\n          label=\"Show Email on Profile\"\r\n        />\r\n        <input\r\n          type=\"file\"\r\n          onChange={(e) => setProfileImage(e.target.files[0])}\r\n          accept=\"image/*\"\r\n        />\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleSave}>\r\n          Save Changes\r\n        </Button>\r\n      </form>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}