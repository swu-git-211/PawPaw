{"ast":null,"code":"var _jsxFileName = \"D:\\\\de351\\\\pawpaw\\\\frontend\\\\src\\\\components\\\\Post.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, Button, Typography, TextField } from '@mui/material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Post = ({\n  post,\n  onLike\n}) => {\n  _s();\n  const [comments, setComments] = useState([]);\n  const [newComment, setNewComment] = useState('');\n  useEffect(() => {\n    // โหลดคอมเม้นต์เมื่อโหลดโพสต์\n    const fetchComments = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/pawpaw_test/comments/${post._id}`);\n        if (response.data.success) {\n          setComments(response.data.comments);\n        }\n      } catch (error) {\n        console.error('Failed to load comments', error);\n      }\n    };\n    fetchComments();\n  }, [post._id]);\n  const handleAddComment = async () => {\n    if (!newComment) return;\n    try {\n      const response = await axios.post(`http://localhost:5000/pawpaw_test/comments/${post._id}`, {\n        userId: 'userIdFromStateOrContext',\n        // แทนด้วย user ID ของผู้ใช้ที่ล็อกอิน\n        content: newComment\n      });\n      if (response.data.success) {\n        setComments([...comments, response.data.comment]);\n        setNewComment('');\n      }\n    } catch (error) {\n      console.error('Failed to add comment', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      maxWidth: 600,\n      margin: '20px auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: post.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        children: post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), post.images && post.images.map((image, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `http://localhost:5000/uploads/${image}`,\n        alt: `post image ${index}`,\n        style: {\n          maxWidth: '100%',\n          marginBottom: '1rem'\n        }\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => onLike(post._id),\n        children: [\"Like (\", post.likes, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: \"Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), comments.map(comment => /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: [comment.userId.username, \": \", comment.content]\n      }, comment._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Add a comment\",\n        value: newComment,\n        onChange: e => setNewComment(e.target.value),\n        fullWidth: true,\n        sx: {\n          marginBottom: '1rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleAddComment,\n        variant: \"contained\",\n        children: \"Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(Post, \"MxCDS9ewhkO9e8lz5YjyzEXdntQ=\");\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useEffect","Card","CardContent","Button","Typography","TextField","axios","jsxDEV","_jsxDEV","Post","post","onLike","_s","comments","setComments","newComment","setNewComment","fetchComments","response","get","_id","data","success","error","console","handleAddComment","userId","content","comment","sx","maxWidth","margin","children","variant","username","fileName","_jsxFileName","lineNumber","columnNumber","images","map","image","index","src","alt","style","marginBottom","onClick","likes","label","value","onChange","e","target","fullWidth","_c","$RefreshReg$"],"sources":["D:/de351/pawpaw/frontend/src/components/Post.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Card, CardContent, Button, Typography, TextField } from '@mui/material';\r\nimport axios from 'axios';\r\n\r\nconst Post = ({ post, onLike }) => {\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState('');\r\n\r\n  useEffect(() => {\r\n    // โหลดคอมเม้นต์เมื่อโหลดโพสต์\r\n    const fetchComments = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:5000/pawpaw_test/comments/${post._id}`);\r\n        if (response.data.success) {\r\n          setComments(response.data.comments);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load comments', error);\r\n      }\r\n    };\r\n    fetchComments();\r\n  }, [post._id]);\r\n\r\n  const handleAddComment = async () => {\r\n    if (!newComment) return;\r\n\r\n    try {\r\n      const response = await axios.post(`http://localhost:5000/pawpaw_test/comments/${post._id}`, {\r\n        userId: 'userIdFromStateOrContext', // แทนด้วย user ID ของผู้ใช้ที่ล็อกอิน\r\n        content: newComment,\r\n      });\r\n      if (response.data.success) {\r\n        setComments([...comments, response.data.comment]);\r\n        setNewComment('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to add comment', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card sx={{ maxWidth: 600, margin: '20px auto' }}>\r\n      <CardContent>\r\n        <Typography variant=\"h6\">{post.username}</Typography>\r\n        <Typography variant=\"body1\">{post.content}</Typography>\r\n        {post.images && post.images.map((image, index) => (\r\n          <img key={index} src={`http://localhost:5000/uploads/${image}`} alt={`post image ${index}`} style={{ maxWidth: '100%', marginBottom: '1rem' }} />\r\n        ))}\r\n        <Button onClick={() => onLike(post._id)}>Like ({post.likes})</Button>\r\n      </CardContent>\r\n\r\n      <CardContent>\r\n        <Typography variant=\"h6\">Comments</Typography>\r\n        {comments.map((comment) => (\r\n          <Typography key={comment._id} variant=\"body2\">\r\n            {comment.userId.username}: {comment.content}\r\n          </Typography>\r\n        ))}\r\n        <TextField\r\n          label=\"Add a comment\"\r\n          value={newComment}\r\n          onChange={(e) => setNewComment(e.target.value)}\r\n          fullWidth\r\n          sx={{ marginBottom: '1rem' }}\r\n        />\r\n        <Button onClick={handleAddComment} variant=\"contained\">\r\n          Comment\r\n        </Button>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}